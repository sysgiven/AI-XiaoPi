# 更新日志 (Changelog)

本文档记录了项目的所有重要变更。

格式基于 [Keep a Changelog](https://keepachangelog.com/zh-CN/1.0.0/)，
版本号遵循 [语义化版本](https://semver.org/lang/zh-CN/)。

## [未发布]

### 待添加
- B站直播弹幕支持
- 更多LLM提供商支持
- 性能监控和统计
- Web管理界面

## [1.0.0] - 2025-12-17

### 新增
- ✨ 初始版本发布
- 📺 抖音直播弹幕接入支持
  - 模拟模式（开发测试）
  - 代理模式（通过 DouyinBarrageGrab）
  - 直连模式（预留接口）
- 🤖 多LLM提供商支持
  - OpenAI API 兼容接口
  - ChatGLM (智谱AI)
  - Google Gemini
  - Coze
  - 更多...
- 🔊 多TTS引擎支持
  - Edge TTS（免费）
  - 阿里云TTS
  - 豆包TTS
  - 更多...
- 🎯 智能流量控制
  - 串行化处理机制
  - 自动跳过中间弹幕
  - 防止音频堆积
- 📡 设备连接管理
  - WebSocket服务器
  - 设备自动发现
  - 心跳检测
  - 断线重连
- 🔧 OTA固件更新支持
- 📝 完整的配置系统
- 📊 详细的日志输出

### 修复
- 🐛 修复 sentence_id 未设置导致音频不播放的问题 (详见 `SENTENCE_ID_FIX.md`)
- 🐛 修复弹幕处理并发导致的音频混乱问题
- 🐛 修复 Rate Controller 后台任务未启动的问题
- 🐛 修复设备断开连接未及时清理的问题
- 🐛 修复表情符号导致TTS失败的问题

### 优化
- ⚡ 优化弹幕处理流程，减少延迟
- ⚡ 优化音频发送机制，提升流畅度
- 📝 改进日志输出，便于调试
- 🎨 优化代码结构，提高可维护性

### 文档
- 📖 添加完整的 README.md
- 📖 添加贡献指南 CONTRIBUTING.md
- 📖 添加快速入门文档
- 📖 添加配置说明
- 📖 添加故障排除指南
- 📖 添加架构设计文档

### 已知问题
- ⚠️  直连模式未实现（需要自行实现抖音协议）
- ⚠️  部分LLM响应时间较长可能导致弹幕延迟
- ⚠️  高并发场景下性能有待优化

---

## 版本说明

### 版本号格式
- 主版本号：重大架构变更或不兼容的API修改
- 次版本号：向下兼容的功能性新增
- 修订号：向下兼容的问题修正

### 类型说明
- `新增`: 新功能
- `修复`: Bug修复
- `优化`: 性能优化、代码改进
- `变更`: 功能变更
- `移除`: 移除的功能
- `文档`: 文档更新
- `安全`: 安全相关修复

---

## 参与贡献

如果你想为项目做出贡献，请查看 [贡献指南](CONTRIBUTING.md)。

## 问题反馈

如果你发现了 Bug 或有功能建议，请在 [GitHub Issues](https://github.com/your-repo/issues) 提交。
